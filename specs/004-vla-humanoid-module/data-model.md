# Data Model: Vision-Language-Action (VLA) Module

## Overview
This document defines the key data structures and entities for the Vision-Language-Action module, focusing on the information that flows between the voice interface, LLM reasoning, and robotic action systems.

## 1. Voice Command Entities

### VoiceCommand
- **Description**: Represents a spoken command from a student/user
- **Fields**:
  - `id` (string): Unique identifier for the command
  - `transcript` (string): The text transcription of the spoken command
  - `timestamp` (datetime): When the command was received
  - `confidence` (float): Confidence score from speech recognition (0.0-1.0)
  - `user_id` (string): Identifier for the student issuing the command
  - `raw_audio_path` (string): Path to the original audio file (optional)
  - `intent_classification` (IntentClassification): The classified intent of the command

### IntentClassification
- **Description**: The structured interpretation of a voice command
- **Fields**:
  - `action_type` (string): The primary action (e.g., "move", "grasp", "navigate", "identify")
  - `target_object` (string): The object or location to act upon
  - `parameters` (dict): Additional parameters for the action
  - `confidence` (float): Confidence in the classification (0.0-1.0)
  - `raw_intent` (string): The raw intent extracted from the command

## 2. Task Planning Entities

### TaskPlan
- **Description**: A structured plan generated by the LLM to fulfill a user request
- **Fields**:
  - `id` (string): Unique identifier for the plan
  - `user_request` (string): The original user request
  - `plan_steps` (list of PlanStep): Ordered sequence of steps to execute
  - `estimated_duration` (float): Estimated time to complete the plan (seconds)
  - `complexity_score` (int): Complexity level for educational tracking
  - `status` (string): Current status (e.g., "created", "executing", "completed", "failed")

### PlanStep
- **Description**: A single step within a task plan
- **Fields**:
  - `id` (string): Unique identifier for the step
  - `action` (string): The specific action to perform
  - `parameters` (dict): Parameters for the action
  - `dependencies` (list of string): IDs of steps that must complete first
  - `timeout` (float): Maximum time to wait for completion (seconds)
  - `success_criteria` (list of string): Conditions for successful completion
  - `fallback_plan` (PlanStep): Alternative step if this one fails

## 3. ROS 2 Integration Entities

### ROS2ActionRequest
- **Description**: A request to execute a specific ROS 2 action
- **Fields**:
  - `id` (string): Unique identifier for the request
  - `action_name` (string): Name of the ROS 2 action server
  - `action_type` (string): Type of the action (e.g., "move_base_msgs/MoveBase", "control_msgs/FollowJointTrajectory")
  - `goal` (dict): The goal message parameters
  - `timeout` (float): Time to wait for action completion
  - `feedback_callback` (string): Function to call with feedback updates

### ROS2ActionResult
- **Description**: Result of executing a ROS 2 action
- **Fields**:
  - `request_id` (string): ID of the corresponding request
  - `status` (string): Execution status (e.g., "succeeded", "failed", "canceled", "timeout")
  - `result_data` (dict): The result message from the action server
  - `execution_time` (float): Time taken to execute the action (seconds)
  - `error_message` (string): Error details if the action failed

## 4. Perception Data Entities

### PerceptionData
- **Description**: Information gathered by the robot's sensors
- **Fields**:
  - `id` (string): Unique identifier for the perception data
  - `timestamp` (datetime): When the data was captured
  - `sensor_type` (string): Type of sensor (e.g., "camera", "lidar", "imu")
  - `data` (dict): The actual sensor data
  - `frame_id` (string): Coordinate frame of the data
  - `objects_detected` (list of DetectedObject): Objects identified in the scene

### DetectedObject
- **Description**: An object detected in the environment
- **Fields**:
  - `id` (string): Unique identifier for the object
  - `object_type` (string): Type of object (e.g., "cube", "cup", "table", "human")
  - `position` (dict): 3D position in space (x, y, z coordinates)
  - `orientation` (dict): 3D orientation (quaternion: x, y, z, w)
  - `confidence` (float): Confidence in the detection (0.0-1.0)
  - `properties` (dict): Additional properties (e.g., color, size)

## 5. Simulation Environment Entities

### SimulationState
- **Description**: Current state of the simulation environment
- **Fields**:
  - `timestamp` (datetime): When the state was captured
  - `robot_pose` (dict): Robot's position and orientation
  - `robot_status` (string): Current status (e.g., "idle", "moving", "executing_action")
  - `environment_objects` (list of SimulatedObject): Objects in the environment
  - `active_tasks` (list of string): Currently executing task IDs
  - `simulation_time` (float): Current time in the simulation

### SimulatedObject
- **Description**: An object in the simulation environment
- **Fields**:
  - `id` (string): Unique identifier for the object
  - `name` (string): Name of the object
  - `type` (string): Type of object (e.g., "static", "movable", "interactive")
  - `position` (dict): 3D position in the simulation
  - `properties` (dict): Physical properties (mass, friction, etc.)

## 6. Student Interaction Entities

### StudentSession
- **Description**: A session where a student interacts with the VLA system
- **Fields**:
  - `id` (string): Unique session identifier
  - `student_id` (string): Identifier for the student
  - `start_time` (datetime): When the session started
  - `end_time` (datetime): When the session ended
  - `commands_issued` (list of string): IDs of voice commands issued
  - `tasks_completed` (list of string): IDs of completed tasks
  - `performance_metrics` (dict): Metrics about the session

### PerformanceMetrics
- **Description**: Metrics tracking student progress and system performance
- **Fields**:
  - `command_accuracy` (float): Percentage of correctly interpreted commands
  - `task_completion_rate` (float): Percentage of tasks completed successfully
  - `average_response_time` (float): Average time from command to action
  - `error_recovery_rate` (float): Percentage of errors successfully recovered from
  - `learning_progress` (dict): Progress indicators for different skills